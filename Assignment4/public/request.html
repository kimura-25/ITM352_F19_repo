<!DOCTYPE html>
<html lang="en">

<script>

let params = (new URL(document.location)).searchParams; //params is a variable, 
GET = {}; //GET is an empty object
params.forEach(function (value, key) { GET[key] = value }); // the value is equal to the object of GET


window.onload = function(){
    if (params.has('request_errors')){
        request_form['date'].value = params.get('date');
        console.log('hi');
    }
/*    if (params.has('artist_request')){

    }
    else{
        alert('Please select an artist');
        window.location='/artist_all.html' + window.location.search;
    }*/
}


/*Validating Date is after today*/
//Source: https://www.codexworld.com/how-to/check-given-date-is-greater-than-today-javascript/

function checkdate() {
    var d = new Date(date.value);
    console.log(date);
    var t = new Date()
    console.log(t + d);
    if(d <= t){
        console.log('nogoodday');
        document.getElementById("dateerror").innerHTML =  '<font color="red">Date has already passed. Please select a future date.</font>'
    }
    else{
        document.getElementById("dateerror").innerHTML = " "

    }
}

</script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Request Arist</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="form-style.css">
</head>

<body>
    <form name="request_form" method="POST" action="./submit_request">
        <label for="date">Date of Request</label>
        <br>
        <input type="date" id="date" name="date" onclick="checkdate()" required>
        <br>
        <label for="dateerror" id="dateerror" name="dateerror"></label>
        <br>
        <br>
        <label for="request_notes">Please describe the details of the event (location, time, specific requests,
            etc.)</label>
        <br>
        <input type="text" id="request_notes" name="request_notes" style="height:200px;width:400px;">
        <br>
        <input type="submit" id="submit_request" name="submit_request">
    </form>
</body>

</html>